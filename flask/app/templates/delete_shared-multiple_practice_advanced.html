{% extends "base.html" %}
{% block title %}DELETE文（共通なタプルの削除）演習（応用）{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/learning.css') }}">
{% endblock %}
{% block content %}

<div class="nav-buttons">
  <a href="/basic/delete/shared-tuple/practice/basic" class="prev">◀ 基本へ戻る</a>
  <a href="/quiz/delete_shared-multiple" class="next">クイズへ ▶</a>
</div>

<div class="learning-container">
  <h1>DELETE文（共通なタプルの削除）演習（応用）</h1>

  <p>
    今度は、退職者テーブルに存在し、かつ <code>status = 'inactive'</code> の従業員だけを削除してみましょう。
  </p>

  <section>
    <h2>テーブル：employees</h2>
    <table class="example-table">
      <tr>
        {% for col in desc_employees %}
        <th>{{ col[0] }}</th>
        {% endfor %}
      </tr>
      {% for row in employees %}
      <tr>
        {% for col in row %}
        <td>{{ col }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>

    <h2>テーブル：departed_employees</h2>
    <table class="example-table">
      <tr>
        {% for col in desc_departed %}
        <th>{{ col[0] }}</th>
        {% endfor %}
      </tr>
      {% for row in departed %}
      <tr>
        {% for col in row %}
          <td>{{ col }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </section>

  <section>
    <h2>SQL文を完成させて実行</h2>
    <div class="sql-form-wrapper">
      <form method="POST" class="sql-form">
        <div class="sql-line">
          DELETE <input type="text" name="alias1" size="2" placeholder="a">
        </div>
        <div class="sql-line">
          FROM employees AS a INNER JOIN departed_employees AS d
        </div>
        <div class="sql-line">
          ON a.<input type="text" name="col1" size="6" placeholder="name"> = d.<input type="text" name="col2" size="6" placeholder="name">
        </div>
        <div class="sql-line">
          WHERE <input type="text" name="where_clause" size="25" placeholder="a.status = 'inactive'">;
        </div>

        <div class="form-buttons">
          <button type="submit" name="action" value="execute" class="btn">実行</button>
          <button type="submit" name="action" value="reset" class="btn-reset">データをリセット</button>
        </div>
      </form>
    </div>

    {% if message %}
    <div class="alert-info">{{ message }}</div>
    {% endif %}
  </section>
</div>

<div class="nav-buttons">
  <a href="/basic/delete/shared-tuple/practice/basic" class="prev">◀ 基本へ戻る</a>
  <a href="/quiz/delete_shared-multiple" class="next">クイズへ ▶</a>
</div>

{% endblock %}
