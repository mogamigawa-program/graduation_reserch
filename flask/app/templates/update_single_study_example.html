{% extends "base.html" %}
{% block title %}1つのカラムに対して1つの条件でレコードをUPDATEする実行例ページ{% endblock %}
{% block content %}

<div class="container">
    <div class="nav-buttons">
        <a href="/basic/update/single-column/study" class="prev">◀ 前へ</a>
        <a href="/quiz/update_single_column" class="next">次へ ▶</a>
    </div>
    <h1>1つのカラムに対して1つの条件でレコードをUPDATEする実行例</h1>

    <h2>更新前の products テーブル</h2>
    <table border="1">
        <caption>products (更新前)</caption>
        <tr style="background-color: rgb(255, 123, 0);">
            {% for col in products_desc %}
                <th>{{ col[0] }}</th>
            {% endfor %}
        </tr>
        {% for row in products_data %}
            <tr style="background-color: rgb(240, 184, 128);">
                {% for item in row %}
                    <td>{{ item }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>

    {% if update_result %}
        <h2>UPDATEの実行結果</h2>
        <p><strong>実行クエリ:</strong></p>
        <pre><code>
UPDATE products
SET price = {{ new_price }}
WHERE product_id = {{ target_product_id }};
        </code></pre>

        <p><strong>解説:</strong></p>
        <p>
            このUPDATEクエリは、<code>products</code>テーブルの中で
            <code>product_id = {{ target_product_id }}</code> に該当するレコードの
            <code>price</code> を <code>{{ new_price }}</code> に変更します。
        </p>

        <h2>更新後の products テーブル</h2>
        <table border="1">
            <caption>products (更新後)</caption>
            <tr style="background-color: rgb(255, 123, 0);">
                {% for col in products_desc %}
                    <th>{{ col[0] }}</th>
                {% endfor %}
            </tr>
            {% for row in updated_products_data %}
                <tr style="background-color: rgb(240, 184, 128);">
                    {% for item in row %}
                        <td>{{ item }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    <div class="nav-buttons">
        <a href="/basic/update/single-column/study" class="prev">◀ 前へ</a>
        <a href="/quiz/update_single_column" class="next">次へ ▶</a>
    </div>
</div>

{% endblock %}
